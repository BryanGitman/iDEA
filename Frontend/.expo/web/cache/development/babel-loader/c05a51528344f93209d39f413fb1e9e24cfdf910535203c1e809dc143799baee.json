{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport * as Location from 'expo-location';\nimport * as TaskManager from 'expo-task-manager';\nvar LOCATION_TRACKING = 'location-tracking';\nvar l1;\nvar l2;\nfunction UserLocation() {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    locationStarted = _React$useState2[0],\n    setLocationStarted = _React$useState2[1];\n  var startLocationTracking = function () {\n    var _ref = _asyncToGenerator(function* () {\n      yield Location.startLocationUpdatesAsync(LOCATION_TRACKING, {\n        accuracy: Location.Accuracy.Highest,\n        timeInterval: 5000,\n        distanceInterval: 0\n      });\n      var hasStarted = yield Location.hasStartedLocationUpdatesAsync(LOCATION_TRACKING);\n      setLocationStarted(hasStarted);\n      console.log('tracking started?', hasStarted);\n    });\n    return function startLocationTracking() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  React.useEffect(function () {\n    var config = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        var resf = yield Location.requestForegroundPermissionsAsync();\n        var resb = yield Location.requestBackgroundPermissionsAsync();\n        if (resf.status != 'granted' && resb.status !== 'granted') {\n          console.log('Permission to access location was denied');\n        } else {\n          console.log('Permission to access location granted');\n        }\n      });\n      return function config() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    config();\n  }, []);\n  startLocationTracking();\n  var location = {\n    latitude: l1,\n    longitude: l2\n  };\n  return location;\n}\nTaskManager.defineTask(LOCATION_TRACKING, function () {\n  var _ref4 = _asyncToGenerator(function* (_ref3) {\n    var data = _ref3.data,\n      error = _ref3.error;\n    if (error) {\n      console.log('LOCATION_TRACKING task ERROR:', error);\n      return;\n    }\n    if (data) {\n      var locations = data.locations;\n      var lat = locations[0].coords.latitude;\n      var long = locations[0].coords.longitude;\n      l1 = lat;\n      l2 = long;\n      console.log(new Date(Date.now()).toLocaleString() + \": \" + lat + \",\" + long);\n    }\n  });\n  return function (_x) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexport default UserLocation;","map":{"version":3,"names":["React","Location","TaskManager","LOCATION_TRACKING","l1","l2","UserLocation","useState","locationStarted","setLocationStarted","startLocationTracking","startLocationUpdatesAsync","accuracy","Accuracy","Highest","timeInterval","distanceInterval","hasStarted","hasStartedLocationUpdatesAsync","console","log","useEffect","config","resf","requestForegroundPermissionsAsync","resb","requestBackgroundPermissionsAsync","status","location","latitude","longitude","defineTask","data","error","locations","lat","coords","long","Date","now","toLocaleString"],"sources":["C:/Users/devandroid/Desktop/iDEA/frontend/UserLocation.js"],"sourcesContent":["import React from 'react';\r\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\r\nimport * as Location from 'expo-location';\r\nimport * as TaskManager from 'expo-task-manager';\r\n\r\nconst LOCATION_TRACKING = 'location-tracking';\r\n\r\nvar l1;\r\nvar l2;\r\n\r\nfunction UserLocation() {\r\n\r\n    const [locationStarted, setLocationStarted] = React.useState(false);\r\n\r\n    const startLocationTracking = async () => {\r\n        await Location.startLocationUpdatesAsync(LOCATION_TRACKING, {\r\n            accuracy: Location.Accuracy.Highest,\r\n            timeInterval: 5000,\r\n            distanceInterval: 0,\r\n        });\r\n        const hasStarted = await Location.hasStartedLocationUpdatesAsync(\r\n            LOCATION_TRACKING\r\n        );\r\n        setLocationStarted(hasStarted);\r\n        console.log('tracking started?', hasStarted);\r\n    };\r\n\r\n    React.useEffect(() => {\r\n        const config = async () => {\r\n            let resf = await Location.requestForegroundPermissionsAsync();\r\n            let resb = await Location.requestBackgroundPermissionsAsync();\r\n            if (resf.status != 'granted' && resb.status !== 'granted') {\r\n                console.log('Permission to access location was denied');\r\n            } else {\r\n                console.log('Permission to access location granted');\r\n            }\r\n        };\r\n\r\n        config();\r\n    }, []);\r\n\r\n    startLocationTracking();\r\n\r\n    const location = \r\n    {\r\n        latitude: l1,\r\n        longitude: l2\r\n    }\r\n\r\n    return location;\r\n}\r\n\r\nTaskManager.defineTask(LOCATION_TRACKING, async ({ data, error }) => {\r\n    if (error) {\r\n        console.log('LOCATION_TRACKING task ERROR:', error);\r\n        return;\r\n    }\r\n    if (data) {\r\n        const { locations } = data;\r\n        let lat = locations[0].coords.latitude;\r\n        let long = locations[0].coords.longitude;\r\n\r\n        l1 = lat;\r\n        l2 = long;\r\n\r\n        console.log(\r\n            `${new Date(Date.now()).toLocaleString()}: ${lat},${long}`\r\n        );\r\n    }\r\n});\r\n\r\nexport default UserLocation;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AAAC;AAAA;AAAA;AAAA;AAE1B,OAAO,KAAKC,QAAQ,MAAM,eAAe;AACzC,OAAO,KAAKC,WAAW,MAAM,mBAAmB;AAEhD,IAAMC,iBAAiB,GAAG,mBAAmB;AAE7C,IAAIC,EAAE;AACN,IAAIC,EAAE;AAEN,SAASC,YAAY,GAAG;EAEpB,sBAA8CN,KAAK,CAACO,QAAQ,CAAC,KAAK,CAAC;IAAA;IAA5DC,eAAe;IAAEC,kBAAkB;EAE1C,IAAMC,qBAAqB;IAAA,6BAAG,aAAY;MACtC,MAAMT,QAAQ,CAACU,yBAAyB,CAACR,iBAAiB,EAAE;QACxDS,QAAQ,EAAEX,QAAQ,CAACY,QAAQ,CAACC,OAAO;QACnCC,YAAY,EAAE,IAAI;QAClBC,gBAAgB,EAAE;MACtB,CAAC,CAAC;MACF,IAAMC,UAAU,SAAShB,QAAQ,CAACiB,8BAA8B,CAC5Df,iBAAiB,CACpB;MACDM,kBAAkB,CAACQ,UAAU,CAAC;MAC9BE,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEH,UAAU,CAAC;IAChD,CAAC;IAAA,gBAXKP,qBAAqB;MAAA;IAAA;EAAA,GAW1B;EAEDV,KAAK,CAACqB,SAAS,CAAC,YAAM;IAClB,IAAMC,MAAM;MAAA,8BAAG,aAAY;QACvB,IAAIC,IAAI,SAAStB,QAAQ,CAACuB,iCAAiC,EAAE;QAC7D,IAAIC,IAAI,SAASxB,QAAQ,CAACyB,iCAAiC,EAAE;QAC7D,IAAIH,IAAI,CAACI,MAAM,IAAI,SAAS,IAAIF,IAAI,CAACE,MAAM,KAAK,SAAS,EAAE;UACvDR,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;QAC3D,CAAC,MAAM;UACHD,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;QACxD;MACJ,CAAC;MAAA,gBARKE,MAAM;QAAA;MAAA;IAAA,GAQX;IAEDA,MAAM,EAAE;EACZ,CAAC,EAAE,EAAE,CAAC;EAENZ,qBAAqB,EAAE;EAEvB,IAAMkB,QAAQ,GACd;IACIC,QAAQ,EAAEzB,EAAE;IACZ0B,SAAS,EAAEzB;EACf,CAAC;EAED,OAAOuB,QAAQ;AACnB;AAEA1B,WAAW,CAAC6B,UAAU,CAAC5B,iBAAiB;EAAA,8BAAE,kBAA2B;IAAA,IAAlB6B,IAAI,SAAJA,IAAI;MAAEC,KAAK,SAALA,KAAK;IAC1D,IAAIA,KAAK,EAAE;MACPd,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEa,KAAK,CAAC;MACnD;IACJ;IACA,IAAID,IAAI,EAAE;MACN,IAAQE,SAAS,GAAKF,IAAI,CAAlBE,SAAS;MACjB,IAAIC,GAAG,GAAGD,SAAS,CAAC,CAAC,CAAC,CAACE,MAAM,CAACP,QAAQ;MACtC,IAAIQ,IAAI,GAAGH,SAAS,CAAC,CAAC,CAAC,CAACE,MAAM,CAACN,SAAS;MAExC1B,EAAE,GAAG+B,GAAG;MACR9B,EAAE,GAAGgC,IAAI;MAETlB,OAAO,CAACC,GAAG,CACJ,IAAIkB,IAAI,CAACA,IAAI,CAACC,GAAG,EAAE,CAAC,CAACC,cAAc,EAAE,UAAKL,GAAG,SAAIE,IAAI,CAC3D;IACL;EACJ,CAAC;EAAA;IAAA;EAAA;AAAA,IAAC;AAEF,eAAe/B,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}